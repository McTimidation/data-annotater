{% extends "data_annotater/base.html" %}
{% block title %}Needs Annotation{% endblock %}

{% block content %}
  <h2>Needs Annotation</h2>
  <p class="muted">
    {% if show_all %}
      Showing all records.
    {% else %}
      Showing records where retailer or segment is blank.
    {% endif %}
  </p>
  <p>
    {% if show_all %}
      <a class="btn btn-secondary" href="{% url 'data_annotater:list' %}">Show Needing Annotation</a>
    {% else %}
      <a class="btn btn-secondary" href="{% url 'data_annotater:list' %}?view=all">Show All</a>
    {% endif %}
  </p>

  {% if rows %}
    <table>
      <thead>
        <tr>
          <th>Merchant</th>
          <th>SKU</th>
          <th>Country</th>
          <th>Retailer</th>
          <th>Segment</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for row in rows %}
          <tr>
            <td>{{ row.merchant }}</td>
            <td>{{ row.sku }}</td>
            <td>{{ row.country }}</td>
            <td>{{ row.retailer|default:"" }}</td>
            <td>{{ row.segment|default:"" }}</td>
            <td>
              <a class="btn btn-secondary" href="{% url 'data_annotater:edit' row.pk %}">Annotate</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <div class="card">
      <p>No records were found.</p>
    </div>
  {% endif %}
{% endblock %}
